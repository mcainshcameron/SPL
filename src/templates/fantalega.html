{% extends "base.html" %}
{% set active_page = 'fantalega' %}

{% block title %}FantaSPL - SPL{% endblock %}

{% block content %}
<section class="section">
    <h1>FantaSPL</h1>

    <!-- Leaderboard -->
    <div class="fantalega-leaderboard">
        <h2>Classifica</h2>
        
        <!-- Desktop Table View -->
        <div class="table-responsive desktop-only">
            <table class="fantalega-table">
                <thead>
                    <tr>
                        <th>Rank</th>
                        <th>Team</th>
                        <th>Manager</th>
                        <th>Punti Totali</th>
                    </tr>
                </thead>
                <tbody>
                    {% for team in standings %}
                    <tr class="{% if loop.index <= 3 %}podium podium-{{ loop.index }}{% endif %}">
                        <td class="rank">
                            {% if loop.index == 1 %}ðŸ¥‡
                            {% elif loop.index == 2 %}ðŸ¥ˆ
                            {% elif loop.index == 3 %}ðŸ¥‰
                            {% else %}{{ team.Rank }}
                            {% endif %}
                        </td>
                        <td class="team-name">
                            <a href="#team-{{ team['Team Name']|replace(' ', '-')|lower }}">{{ team['Team Name'] }}</a>
                        </td>
                        <td>{{ team.owner_display }}</td>
                        <td class="points">{{ team['Total Points']|round(0)|int }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        
        <!-- Mobile Card View -->
        <div class="fantalega-cards mobile-only">
            {% for team in standings %}
            <div class="fantalega-card">
                <div class="fantalega-card-header">
                    <div class="rank-badge">
                        {% if loop.index == 1 %}ðŸ¥‡
                        {% elif loop.index == 2 %}ðŸ¥ˆ
                        {% elif loop.index == 3 %}ðŸ¥‰
                        {% else %}#{{ team.Rank }}
                        {% endif %}
                    </div>
                    <div class="team-info">
                        <a href="#team-{{ team['Team Name']|replace(' ', '-')|lower }}" class="team-name">{{ team['Team Name'] }}</a>
                        <div class="team-manager">{{ team.owner_display }}</div>
                    </div>
                    <div class="team-points">{{ team['Total Points']|round(0)|int }}</div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Team Rosters -->
    <div class="fantalega-rosters">
        <h2>Le rose</h2>
        {% for team_name, roster in rosters.items() %}
        <details class="roster-card" id="team-{{ team_name|replace(' ', '-')|lower }}">
            <summary class="roster-header">
                <h3>{{ team_name }}</h3>
                <span class="roster-count">{{ roster|length }} giocatori</span>
            </summary>
            <div class="roster-content">
                <div class="roster-grid">
                    {% for player in roster %}
                    <div class="roster-player">
                        <a href="/players/{{ player.slug }}/">{{ player.display_name }}</a>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </details>
        {% endfor %}
    </div>
</section>
{% endblock %}
